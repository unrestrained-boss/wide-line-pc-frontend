(window["webpackJsonpwide-line"]=window["webpackJsonpwide-line"]||[]).push([[15],{200:function(e,a,t){"use strict";t.r(a);var r=t(22),n=t.n(r),s=(t(132),t(76)),l=(t(184),t(133)),c=(t(386),t(387)),o=(t(428),t(430)),i=(t(187),t(54)),u=(t(186),t(104)),d=(t(388),t(389)),m=(t(66),t(19)),p=t(40),f=t(10),b=t(0),h=t.n(b),v=t(429),g=t(439),w=t.n(g),E=t(134),C=t(397),k={labelCol:{span:4},wrapperCol:{span:20}};a.default=i.a.create()(function(e){var a=e.getPreData(),t=void 0!==a,r=Object(b.useState)(!1),g=Object(f.a)(r,2),O=g[0],j=g[1],x=e.form,y=x.getFieldDecorator,S=x.validateFieldsAndScroll,R=x.setFieldsValue;function L(a){a.preventDefault(),S(function(a,r){a||function(a){e.setCanClosable(!1),j(!0);var r={name:a.name,desc:a.desc,status:a.status?1:0,role_router:a.role_router.join(",")};t?function(e){I.apply(this,arguments)}(r):function(e){B.apply(this,arguments)}(r)}(r)})}function B(){return(B=Object(p.a)(n.a.mark(function a(t){var r,l,c;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.addRole(t);case 2:if(r=a.sent,l=Object(f.a)(r,2),c=l[1],e.setCanClosable(!0),j(!1),!c){a.next=10;break}return c.showMessage(),a.abrupt("return");case 10:e.close(),e.onComplete(),s.a.success("\u6dfb\u52a0\u6210\u529f!");case 13:case"end":return a.stop()}},a)}))).apply(this,arguments)}function I(){return(I=Object(p.a)(n.a.mark(function t(r){var l,c,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.updateRole(a.id,r);case 2:if(l=t.sent,c=Object(f.a)(l,2),o=c[1],e.setCanClosable(!0),j(!1),!o){t.next=10;break}return o.showMessage(),t.abrupt("return");case 10:e.close(),e.onComplete(),s.a.success("\u7f16\u8f91\u6210\u529f!");case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}Object(b.useEffect)(function(){t&&R({name:a.name,desc:a.desc,role_router:a.role_router.split(","),status:1===a.status})},[]);var _=E.a.useMenuList(),A=_.data,D=_.isLoading,F=_.isError,M=_.refresh,T=Object(b.useMemo)(function(){return C.a.transformTitleAndValue(A,[],"name","id")},[A]);return h.a.createElement(l.a,{spinning:O||D},F&&h.a.createElement(d.a,{style:{marginTop:"20px"},showIcon:!0,message:"\u62b1\u6b49",description:h.a.createElement(h.a.Fragment,null,h.a.createElement("span",null,"\u51fa\u73b0\u4e86\u4e00\u70b9\u95ee\u9898, \u8bf7\u7a0d\u540e\u518d\u8bd5\u6216"),h.a.createElement(m.a,{type:"link",onClick:function(){return M()}},"\u70b9\u51fb\u91cd\u8bd5")),type:"error",closable:!0}),h.a.createElement(i.a,{layout:"horizontal",onSubmit:function(e){return L(e)}},h.a.createElement(i.a.Item,Object.assign({label:"\u89d2\u8272\u540d\u79f0"},k),y("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}]})(h.a.createElement(u.a,{autoFocus:!0,placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}))),h.a.createElement(i.a.Item,Object.assign({label:"\u89d2\u8272\u63cf\u8ff0"},k),y("desc",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u63cf\u8ff0"}]})(h.a.createElement(w.a,{autosize:{minRows:4,maxRows:6},placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u63cf\u8ff0"}))),h.a.createElement(i.a.Item,Object.assign({label:"\u83dc\u5355\u6743\u9650"},k),y("role_router",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u83dc\u5355\u6743\u9650"}]})(h.a.createElement(o.a,{treeData:T,treeCheckable:!0,treeDefaultExpandAll:!0,showCheckedStrategy:"SHOW_ALL",placeholder:"\u8bf7\u9009\u62e9\u83dc\u5355\u6743\u9650"}))),h.a.createElement(i.a.Item,Object.assign({label:"\u72b6\u6001"},k),y("status",{rules:[],valuePropName:"checked",initialValue:!0})(h.a.createElement(c.a,{checkedChildren:"\u542f\u7528",unCheckedChildren:"\u7981\u7528"}))),h.a.createElement(i.a.Item,null,h.a.createElement(m.a,{type:"primary",block:!0,htmlType:"submit"},"\u63d0\u4ea4"))))})},397:function(e,a,t){"use strict";var r={transformTitleAndValue:function e(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"children";return a.map(function(a){var l=[];return a[s]&&(l=e(a[s],t,r,n,s)),{title:a[r],value:a[n],disabled:-1!==t.indexOf(a[n]),children:l}})}};a.a=r},429:function(e,a,t){"use strict";var r=t(51),n={useRoleList:function(){return r.a.useServiceListBase("/roles/index")},roleList:r.a.listServiceBase("/roles/index"),addRole:r.a.addServiceBase("/roles/add"),updateRole:r.a.updateServiceBase("/roles/edit"),deleteRole:r.a.deleteServiceBase("/roles/delete"),toggleRoleStatus:r.a.updateServiceBase("/roles/edit")};a.a=n}}]);
//# sourceMappingURL=15.a80531fa.chunk.js.map