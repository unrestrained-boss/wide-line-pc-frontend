(window["webpackJsonpwide-line"]=window["webpackJsonpwide-line"]||[]).push([[11],{196:function(e,t,a){"use strict";a.r(t);var n=a(22),r=a.n(n),i=(a(132),a(76)),s=(a(184),a(133)),l=(a(66),a(19)),c=(a(386),a(387)),o=(a(186),a(104)),u=(a(187),a(54)),d=(a(433),a(431)),m=(a(103),a(9)),p=a(40),f=a(139),b=a(10),g=a(0),h=a.n(g),y=a(421),v=a(28),E=a(392);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var O={labelCol:{span:4},wrapperCol:{span:20}};t.default=u.a.create()(function(e){var t=e.getPreData(),a=void 0!==t,n=Object(g.useState)(!1),j=Object(b.a)(n,2),k=j[0],x=j[1],C=e.form,S=C.getFieldDecorator,I=C.validateFieldsAndScroll,P=C.getFieldValue,A=C.setFieldsValue;function F(t){t.preventDefault(),I(function(t,n){t||function(t){e.setCanClosable(!1),x(!0);var n=Object(E.d)(t.avatar,"http://woddp.yxilin.com"),r={username:t.username,nickname:t.nickname,email:t.email,avatar:n.length>0?n[0]:null,mobile:t.mobile,status:t.status?1:0};if(a)!function(e){q.apply(this,arguments)}(r);else{!function(e){D.apply(this,arguments)}(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach(function(t){Object(f.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},r,{password:t.password,repassword:t.repassword}))}}(n)})}function D(){return(D=Object(p.a)(r.a.mark(function t(a){var n,s,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.addAdministration(a);case 2:if(n=t.sent,s=Object(b.a)(n,2),l=s[1],e.setCanClosable(!0),x(!1),!l){t.next=10;break}return l.showMessage(),t.abrupt("return");case 10:e.close(),e.onComplete(),i.a.success("\u6dfb\u52a0\u6210\u529f!");case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}function q(){return(q=Object(p.a)(r.a.mark(function a(n){var s,l,c;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.updateAdministration(t.id,n);case 2:if(s=a.sent,l=Object(b.a)(s,2),c=l[1],e.setCanClosable(!0),x(!1),!c){a.next=10;break}return c.showMessage(),a.abrupt("return");case 10:e.close(),e.onComplete(),i.a.success("\u7f16\u8f91\u6210\u529f!");case 13:case"end":return a.stop()}},a)}))).apply(this,arguments)}Object(g.useEffect)(function(){a&&A({avatar:t.avatar?Object(E.c)([t.avatar]):[],username:t.username,nickname:t.nickname,mobile:t.mobile,email:t.email,status:1===t.status})},[]);var L=P("avatar")||[];return h.a.createElement(s.a,{spinning:k},h.a.createElement(u.a,{layout:"horizontal",onSubmit:function(e){return F(e)}},h.a.createElement(u.a.Item,Object.assign({label:"\u5934\u50cf"},O,{extra:"\u4e0a\u4f20 jpg/png \u6587\u4ef6"}),S("avatar",{rules:[{validator:function(e,t,a){var n=!0,r=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){"error"===s.value.status&&a(new Error("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25, \u8bf7\u91cd\u8bd5"))}}catch(c){r=!0,i=c}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}a()}}],initialValue:[],valuePropName:"fileList",getValueFromEvent:E.b})(h.a.createElement(d.a,{data:{type:"user"},headers:{"X-Token":v.a.getUserToken()},customRequest:E.a,action:"".concat("http://woddp.yxilin.com","/upload/files"),listType:"picture-card"},0===L.length&&h.a.createElement(h.a.Fragment,null,h.a.createElement(m.a,{type:"plus"}),h.a.createElement("div",{className:"ant-upload-text"},"\u9009\u62e9\u6587\u4ef6"))))),h.a.createElement(u.a.Item,Object.assign({label:"\u7528\u6237\u540d"},O),S("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]})(h.a.createElement(o.a,{autoFocus:!0,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),h.a.createElement(u.a.Item,Object.assign({label:"\u6635\u79f0"},O),S("nickname",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6635\u79f0"}]})(h.a.createElement(o.a,{placeholder:"\u8bf7\u8f93\u5165\u6635\u79f0"}))),!a&&h.a.createElement(h.a.Fragment,null,h.a.createElement(u.a.Item,Object.assign({label:"\u5bc6\u7801"},O),S("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]})(h.a.createElement(o.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),h.a.createElement(u.a.Item,Object.assign({label:"\u786e\u8ba4\u5bc6\u7801"},O),S("repassword",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801"}]})(h.a.createElement(o.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801"})))),h.a.createElement(u.a.Item,Object.assign({label:"\u624b\u673a\u53f7\u7801"},O),S("mobile",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}]})(h.a.createElement(o.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}))),h.a.createElement(u.a.Item,Object.assign({label:"\u90ae\u7bb1"},O),S("email",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}]})(h.a.createElement(o.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),h.a.createElement(u.a.Item,Object.assign({label:"\u72b6\u6001"},O),S("status",{rules:[],valuePropName:"checked",initialValue:!0})(h.a.createElement(c.a,{checkedChildren:"\u542f\u7528",unCheckedChildren:"\u7981\u7528"}))),h.a.createElement(u.a.Item,null,h.a.createElement(l.a,{type:"primary",block:!0,htmlType:"submit"},"\u63d0\u4ea4"))))})},211:function(e,t,a){"use strict";a.r(t);a(435);var n=a(456),r=(a(419),a(418)),i=(a(388),a(389)),s=(a(103),a(9)),l=a(22),c=a.n(l),o=(a(132),a(76)),u=a(10),d=a(40),m=(a(66),a(19)),p=(a(413),a(420)),f=a(0),b=a.n(f),g=a(421),h=a(79),y=a(196);t.default=function(e){var t=[{title:"\u8d26\u53f7",dataIndex:"username",width:160,align:"left"},{title:"\u5934\u50cf&\u6635\u79f0",dataIndex:"nickname",width:200,align:"left",render:function(e,t){return b.a.createElement(b.a.Fragment,null,b.a.createElement("img",{src:t.avatar,style:{height:"30px",width:"30px",verticalAlign:"middle",borderRadius:"5px"},alt:""}),"\xa0\xa0",b.a.createElement("span",null,t.nickname))}},{title:"\u7535\u8bdd\u53f7\u7801",dataIndex:"mobile",width:140},{title:"\u90ae\u7bb1",dataIndex:"email",width:300},{title:"\u72b6\u6001",dataIndex:"status",render:function(e){return b.a.createElement(p.a,{color:1===e?"blue":"red"},1===e?"\u542f\u7528":"\u7981\u7528")}},{title:"\u64cd\u4f5c",align:"center",width:120,render:function(e,t){return b.a.createElement(b.a.Fragment,null,b.a.createElement(m.a,{size:"small",type:"primary",onClick:function(){h.a.openModal(y.default,{title:"\u7f16\u8f91\u7ba1\u7406\u5458",data:t,defaultCanDismiss:!1,onComplete:function(){j()}})}},"\u7f16\u8f91"),"\xa0",b.a.createElement(m.a,{size:"small",type:"danger",onClick:function(){h.a.confirm("\u786e\u5b9e\u8981\u5220\u9664\u5417?",{onOk:function(){var e=Object(d.a)(c.a.mark(function e(a){var n,r,i,s,l,d;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setLoading,r=a.close,i=a.failBack,n(),e.next=4,g.a.deleteAdministration([t.id]);case 4:if(s=e.sent,l=Object(u.a)(s,2),!(d=l[1])){e.next=11;break}return d.showMessage(),i(),e.abrupt("return");case 11:r(),j(),o.a.success("\u5220\u9664\u6210\u529f!");case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()})}},"\u5220\u9664"))}}],a=g.a.useAdministrationList(),l=a.total,f=a.data,v=a.isLoading,E=a.isError,w=a.page,O=a.setPage,j=a.refresh;return b.a.createElement("div",{className:"frame-content"},b.a.createElement("div",{style:{marginBottom:"20px"}},b.a.createElement(m.a,{onClick:function(){h.a.openModal(y.default,{title:"\u6dfb\u52a0\u7ba1\u7406\u5458",defaultCanDismiss:!1,onComplete:function(){j()}})},type:"primary"},b.a.createElement(s.a,{type:"plus"}),"\u6dfb\u52a0\u7ba1\u7406\u5458")),E&&b.a.createElement(i.a,{style:{margin:"0 0 20px 0"},showIcon:!0,message:"\u62b1\u6b49",description:b.a.createElement(b.a.Fragment,null,b.a.createElement("span",null,"\u51fa\u73b0\u4e86\u4e00\u70b9\u95ee\u9898, \u8bf7\u7a0d\u540e\u518d\u8bd5\u6216"),b.a.createElement(m.a,{type:"link",onClick:function(){return j()}},"\u70b9\u51fb\u91cd\u8bd5")),type:"error",closable:!0}),b.a.createElement(r.a,{size:"small",bordered:!0,loading:{spinning:v,delay:250},locale:{emptyText:v?"\u62fc\u547d\u52a0\u8f7d\u4e2d...":"\u62b1\u6b49, \u6682\u65e0\u6570\u636e"},pagination:!1,rowKey:"id",columns:t,dataSource:f}),b.a.createElement(n.a,{style:{marginTop:"20px",textAlign:"right"},current:w,pageSize:20,disabled:v,hideOnSinglePage:!0,onChange:function(e){return O(e)},total:l}))}},392:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"c",function(){return c});var n=a(137),r=a.n(n);function i(e){var t=e.action,a=e.data,n=e.headers,r=e.onProgress,i=e.onError,s=e.onSuccess,l=e.withCredentials,c=e.file,o=e.filename,u=new XMLHttpRequest,d=new FormData;return d.append(o,c),Object.keys(a).forEach(function(e){d.append(e,a[e])}),u.open("POST",t),Object.keys(n).forEach(function(e){u.setRequestHeader(e,n[e])}),u.withCredentials=l,u.upload.onprogress=function(e){r({percent:e.loaded/e.total*100})},u.onerror=u.ontimeout=function(){i(u.response)},u.onabort=function(){},u.onload=function(){if(4===u.readyState){var e=function(e){try{return JSON.parse(e)}catch(t){return e}}(u.response);200===e.code?s(e.data):i(e.msg||e)}else i(u.response)},u.send(d),{abort:function(){u.abort()}}}function s(e){return Array.isArray(e)?e:e&&e.fileList}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map(function(e){return e.response?e.response[0]:e.url.replace(new RegExp("^".concat(t)),"")})}function c(e){return e.map(function(e){return{uid:r()("_upload_"),name:r()("_upload_name_"),status:"done",url:e}})}},421:function(e,t,a){"use strict";var n=a(51),r={useAdministrationList:function(){return n.a.useServiceListBase("/user/index")},addAdministration:n.a.addServiceBase("/user/add"),updateAdministration:n.a.updateServiceBase("/user/edit"),deleteAdministration:n.a.deleteServiceBase("/user/delete"),toggleAdministrationStatus:n.a.updateServiceBase("/user/edit")};t.a=r}}]);
//# sourceMappingURL=11.49566dea.chunk.js.map