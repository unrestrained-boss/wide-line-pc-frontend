(window["webpackJsonpwide-line"]=window["webpackJsonpwide-line"]||[]).push([[12],{198:function(e,t,a){"use strict";a.r(t);var n=a(22),r=a.n(n),i=(a(132),a(76)),l=(a(184),a(133)),s=(a(66),a(19)),c=(a(386),a(387)),o=(a(186),a(104)),u=(a(187),a(54)),d=(a(433),a(431)),p=(a(103),a(9)),m=a(40),f=a(10),b=a(0),g=a.n(b),y=a(392),h=a(28),v=a(427),E={labelCol:{span:4},wrapperCol:{span:20}};t.default=u.a.create()(function(e){var t=e.getPreData(),a=void 0!==t,n=Object(b.useState)(!1),w=Object(f.a)(n,2),x=w[0],k=w[1],C=e.form,O=C.getFieldDecorator,I=C.validateFieldsAndScroll,j=C.setFieldsValue,B=C.getFieldValue;function S(t){t.preventDefault(),I(function(t,n){t||function(t){e.setCanClosable(!1),k(!0);var n=Object(y.d)(t.img,"http://woddp.yxilin.com"),r={img:n.length>0?n[0]:null,value:t.value,type:t.type,status:t.status?1:0,pid:1};a?function(e){L.apply(this,arguments)}(r):function(e){F.apply(this,arguments)}(r)}(n)})}function F(){return(F=Object(m.a)(r.a.mark(function t(a){var n,l,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.addBannerItem(a);case 2:if(n=t.sent,l=Object(f.a)(n,2),s=l[1],e.setCanClosable(!0),k(!1),!s){t.next=10;break}return s.showMessage(),t.abrupt("return");case 10:e.close(),e.onComplete(),i.a.success("\u6dfb\u52a0\u6210\u529f!");case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}function L(){return(L=Object(m.a)(r.a.mark(function a(n){var l,s,c;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.updateBannerItem(t.id,n);case 2:if(l=a.sent,s=Object(f.a)(l,2),c=s[1],e.setCanClosable(!0),k(!1),!c){a.next=10;break}return c.showMessage(),a.abrupt("return");case 10:e.close(),e.onComplete(),i.a.success("\u7f16\u8f91\u6210\u529f!");case 13:case"end":return a.stop()}},a)}))).apply(this,arguments)}Object(b.useEffect)(function(){a&&j({img:t.img?Object(y.c)([t.img]):[],type:t.type,value:t.value,status:1===t.status})},[]);var q=B("img")||[];return g.a.createElement(l.a,{spinning:x},g.a.createElement(u.a,{layout:"horizontal",onSubmit:function(e){return S(e)}},g.a.createElement(u.a.Item,Object.assign({label:"banner"},E,{extra:"\u4e0a\u4f20 jpg/png \u6587\u4ef6"}),O("img",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u56fe\u7247"},{validator:function(e,t,a){var n=!0,r=!1,i=void 0;try{for(var l,s=t[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){"error"===l.value.status&&a(new Error("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25, \u8bf7\u91cd\u8bd5"))}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}a()}}],initialValue:[],valuePropName:"fileList",getValueFromEvent:y.b})(g.a.createElement(d.a,{data:{type:"user"},headers:{"X-Token":h.a.getUserToken()},customRequest:y.a,action:"".concat("http://woddp.yxilin.com","/upload/files"),listType:"picture-card"},0===q.length&&g.a.createElement(g.a.Fragment,null,g.a.createElement(p.a,{type:"plus"}),g.a.createElement("div",{className:"ant-upload-text"},"\u9009\u62e9\u6587\u4ef6"))))),g.a.createElement(u.a.Item,Object.assign({label:"\u53c2\u6570"},E),O("value",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53c2\u6570"}]})(g.a.createElement(o.a,{autoFocus:!0,placeholder:"\u8bf7\u8f93\u5165\u53c2\u6570"}))),g.a.createElement(u.a.Item,Object.assign({label:"\u7c7b\u578b"},E),O("type",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7c7b\u578b"}]})(g.a.createElement(o.a,{placeholder:"\u8bf7\u8f93\u5165\u7c7b\u578b"}))),g.a.createElement(u.a.Item,Object.assign({label:"\u72b6\u6001"},E),O("status",{rules:[],valuePropName:"checked",initialValue:!0})(g.a.createElement(c.a,{checkedChildren:"\u542f\u7528",unCheckedChildren:"\u7981\u7528"}))),g.a.createElement(u.a.Item,null,g.a.createElement(s.a,{type:"primary",block:!0,htmlType:"submit"},"\u63d0\u4ea4"))))})},213:function(e,t,a){"use strict";a.r(t);a(419);var n=a(418),r=(a(388),a(389)),i=(a(103),a(9)),l=a(22),s=a.n(l),c=(a(132),a(76)),o=a(10),u=a(40),d=(a(66),a(19)),p=(a(413),a(420)),m=a(0),f=a.n(m),b=a(79),g=a(198),y=a(427);t.default=function(e){var t=[{title:"\u7c7b\u578b",dataIndex:"type",width:200,align:"left"},{title:"banner",dataIndex:"img",width:240,align:"center",render:function(e){return f.a.createElement("img",{style:{height:"80px",width:"200px"},src:e,alt:""})}},{title:"\u94fe\u63a5\u5730\u5740",dataIndex:"value",width:200,align:"left"},{title:"\u72b6\u6001",dataIndex:"status",render:function(e){return f.a.createElement(p.a,{color:1===e?"blue":"red"},1===e?"\u542f\u7528":"\u7981\u7528")}},{title:"\u64cd\u4f5c",align:"center",width:120,render:function(e,t){return f.a.createElement(f.a.Fragment,null,f.a.createElement(d.a,{size:"small",type:"primary",onClick:function(){b.a.openModal(g.default,{title:"\u7f16\u8f91banner",data:t,defaultCanDismiss:!1,onComplete:function(){v()}})}},"\u7f16\u8f91"),"\xa0",f.a.createElement(d.a,{size:"small",type:"danger",onClick:function(){b.a.confirm("\u786e\u5b9e\u8981\u5220\u9664\u5417?",{onOk:function(){var e=Object(u.a)(s.a.mark(function e(a){var n,r,i,l,u,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setLoading,r=a.close,i=a.failBack,n(),e.next=4,y.a.deleteBannerItem([t.id]);case 4:if(l=e.sent,u=Object(o.a)(l,2),!(d=u[1])){e.next=11;break}return d.showMessage(),i(),e.abrupt("return");case 11:r(),v(),c.a.success("\u5220\u9664\u6210\u529f!");case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()})}},"\u5220\u9664"))}}],a=y.a.useBannerItemList(),l=a.data,m=a.isError,h=a.isLoading,v=a.refresh;return f.a.createElement("div",{className:"frame-content"},f.a.createElement("div",{style:{marginBottom:"20px"}},f.a.createElement(d.a,{onClick:function(){b.a.openModal(g.default,{title:"\u6dfb\u52a0banner",defaultCanDismiss:!1,onComplete:function(){v()}})},type:"primary"},f.a.createElement(i.a,{type:"plus"}),"\u6dfb\u52a0 banner")),m&&f.a.createElement(r.a,{style:{margin:"0 0 20px 0"},showIcon:!0,message:"\u62b1\u6b49",description:f.a.createElement(f.a.Fragment,null,f.a.createElement("span",null,"\u51fa\u73b0\u4e86\u4e00\u70b9\u95ee\u9898, \u8bf7\u7a0d\u540e\u518d\u8bd5\u6216"),f.a.createElement(d.a,{type:"link",onClick:function(){return v()}},"\u70b9\u51fb\u91cd\u8bd5")),type:"error",closable:!0}),f.a.createElement(n.a,{size:"small",bordered:!0,loading:{spinning:h,delay:250},locale:{emptyText:h?"\u62fc\u547d\u52a0\u8f7d\u4e2d...":"\u62b1\u6b49, \u6682\u65e0\u6570\u636e"},pagination:!1,rowKey:"id",columns:t,dataSource:l}))}},392:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return l}),a.d(t,"d",function(){return s}),a.d(t,"c",function(){return c});var n=a(137),r=a.n(n);function i(e){var t=e.action,a=e.data,n=e.headers,r=e.onProgress,i=e.onError,l=e.onSuccess,s=e.withCredentials,c=e.file,o=e.filename,u=new XMLHttpRequest,d=new FormData;return d.append(o,c),Object.keys(a).forEach(function(e){d.append(e,a[e])}),u.open("POST",t),Object.keys(n).forEach(function(e){u.setRequestHeader(e,n[e])}),u.withCredentials=s,u.upload.onprogress=function(e){r({percent:e.loaded/e.total*100})},u.onerror=u.ontimeout=function(){i(u.response)},u.onabort=function(){},u.onload=function(){if(4===u.readyState){var e=function(e){try{return JSON.parse(e)}catch(t){return e}}(u.response);200===e.code?l(e.data):i(e.msg||e)}else i(u.response)},u.send(d),{abort:function(){u.abort()}}}function l(e){return Array.isArray(e)?e:e&&e.fileList}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map(function(e){return e.response?e.response[0]:e.url.replace(new RegExp("^".concat(t)),"")})}function c(e){return e.map(function(e){return{uid:r()("_upload_"),name:r()("_upload_name_"),status:"done",url:e}})}},427:function(e,t,a){"use strict";var n=a(51),r={useBannerItemList:function(){return n.a.useServiceListBase("/banner-item/index")},addBannerItem:n.a.addServiceBase("/banner-item/add"),updateBannerItem:n.a.updateServiceBase("/banner-item/edit"),deleteBannerItem:n.a.deleteServiceBase("/banner-item/delete"),toggleBannerItemStatus:n.a.updateServiceBase("/banner-item/edit")};t.a=r}}]);
//# sourceMappingURL=12.ac2c23dc.chunk.js.map