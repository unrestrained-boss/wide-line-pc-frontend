(window["webpackJsonpwide-line"]=window["webpackJsonpwide-line"]||[]).push([[16],{199:function(e,a,t){"use strict";t.r(a);var n=t(22),r=t.n(n),l=(t(132),t(76)),s=(t(184),t(133)),i=(t(386),t(387)),c=(t(428),t(430)),u=(t(425),t(432)),o=(t(437),t(457)),m=(t(187),t(54)),d=(t(186),t(104)),p=(t(388),t(389)),f=(t(66),t(19)),b=t(40),h=t(10),g=t(0),E=t.n(g),v=t(134),w=t(397),O={labelCol:{span:4},wrapperCol:{span:20}};a.default=m.a.create()(function(e){var a=e.getPreData(),t=void 0!==a,n=Object(g.useState)(!1),j=Object(h.a)(n,2),C=j[0],k=j[1],y=e.form,x=y.getFieldDecorator,I=y.validateFieldsAndScroll,M=y.setFieldsValue;function V(a){a.preventDefault(),I(function(a,n){a||function(a){e.setCanClosable(!1),k(!0);var n={name:a.name,icon:a.icon,url:a.url,status:a.status?1:0,sort:a.sort,pid:a.pid};t?function(e){D.apply(this,arguments)}(n):function(e){q.apply(this,arguments)}(n)}(n)})}function q(){return(q=Object(b.a)(r.a.mark(function a(t){var n,s,i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.addMenu(t);case 2:if(n=a.sent,s=Object(h.a)(n,2),i=s[1],e.setCanClosable(!0),k(!1),!i){a.next=10;break}return i.showMessage(),a.abrupt("return");case 10:e.close(),e.onComplete(),l.a.success("\u6dfb\u52a0\u6210\u529f!");case 13:case"end":return a.stop()}},a)}))).apply(this,arguments)}function D(){return(D=Object(b.a)(r.a.mark(function t(n){var s,i,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.updateMenu(a.id,n);case 2:if(s=t.sent,i=Object(h.a)(s,2),c=i[1],e.setCanClosable(!0),k(!1),!c){t.next=10;break}return c.showMessage(),t.abrupt("return");case 10:e.close(),e.onComplete(),l.a.success("\u7f16\u8f91\u6210\u529f!");case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}Object(g.useEffect)(function(){t&&M({name:a.name,icon:a.icon,url:a.url,status:1===a.status,pid:a.pid})},[]);var F=v.a.useMenuList(),A=F.data,L=F.isLoading,S=F.isError,T=F.refresh,J=v.a.useMenuUrlList(),P=J.data,z=J.isLoading,N=J.isError,U=J.refresh,B=Object(g.useMemo)(function(){return[{title:"\u6839\u76ee\u5f55",value:0,children:w.a.transformTitleAndValue(A,[],"name","id")}]},[A]);return E.a.createElement(s.a,{spinning:C||L||z},(S||N)&&E.a.createElement(p.a,{style:{marginTop:"20px"},showIcon:!0,message:"\u62b1\u6b49",description:E.a.createElement(E.a.Fragment,null,E.a.createElement("span",null,"\u51fa\u73b0\u4e86\u4e00\u70b9\u95ee\u9898, \u8bf7\u7a0d\u540e\u518d\u8bd5\u6216"),E.a.createElement(f.a,{type:"link",onClick:function(){T(),U()}},"\u70b9\u51fb\u91cd\u8bd5")),type:"error",closable:!0}),E.a.createElement(m.a,{layout:"horizontal",onSubmit:function(e){return V(e)}},E.a.createElement(m.a.Item,Object.assign({label:"\u83dc\u5355\u540d\u79f0"},O),x("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u83dc\u5355\u540d\u79f0"}]})(E.a.createElement(d.a,{autoFocus:!0,placeholder:"\u8bf7\u8f93\u5165\u83dc\u5355\u540d\u79f0"}))),E.a.createElement(m.a.Item,Object.assign({label:"\u83dc\u5355\u56fe\u6807"},O),x("icon",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u83dc\u5355\u56fe\u6807"}]})(E.a.createElement(d.a,{placeholder:"\u8bf7\u8f93\u5165\u83dc\u5355\u56fe\u6807"}))),E.a.createElement(m.a.Item,Object.assign({label:"\u83dc\u5355\u6392\u5e8f"},O),x("sort",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u83dc\u5355\u6392\u5e8f"}],initialValue:0})(E.a.createElement(o.a,{min:0,placeholder:"\u8bf7\u8f93\u5165\u83dc\u5355\u6392\u5e8f"}))),E.a.createElement(m.a.Item,Object.assign({label:"\u94fe\u63a5\u5730\u5740"},O),x("url",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u94fe\u63a5\u5730\u5740"}]})(E.a.createElement(u.a,{showSearch:!0,placeholder:"\u8bf7\u9009\u62e9\u94fe\u63a5\u5730\u5740"},P.map(function(e){return E.a.createElement(u.a.Option,{key:e.uri},e.uri)})))),E.a.createElement(m.a.Item,Object.assign({label:"\u4e0a\u7ea7\u83dc\u5355"},O),x("pid",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e0a\u7ea7\u83dc\u5355"}],initialValue:0})(E.a.createElement(c.a,{treeData:B,treeDefaultExpandAll:!0,placeholder:"\u8bf7\u9009\u62e9\u4e0a\u7ea7\u83dc\u5355"}))),E.a.createElement(m.a.Item,Object.assign({label:"\u72b6\u6001"},O),x("status",{rules:[],valuePropName:"checked",initialValue:!0})(E.a.createElement(i.a,{checkedChildren:"\u542f\u7528",unCheckedChildren:"\u7981\u7528"}))),E.a.createElement(m.a.Item,null,E.a.createElement(f.a,{type:"primary",block:!0,htmlType:"submit"},"\u63d0\u4ea4"))))})},397:function(e,a,t){"use strict";var n={transformTitleAndValue:function e(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"children";return a.map(function(a){var s=[];return a[l]&&(s=e(a[l],t,n,r,l)),{title:a[n],value:a[r],disabled:-1!==t.indexOf(a[r]),children:s}})}};a.a=n}}]);
//# sourceMappingURL=16.a856ba2e.chunk.js.map